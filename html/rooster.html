<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!--Add lesson form-->
    <form action="lesson_booking.php" method="post">
        <label for="date">Date:</label>
        <input type="datetime-local" id="date" name="date" step="3600" required>
        <br><br>
        <label for="description">Lesson Description:</label>
        <input type="text" id="description" name="description" required>
        <br><br>
        <label for="goal">Lesson Goal:</label>
        <input type="text" id="goal" name="goal" required>
        <br><br>
        <label for="pickup">Pickup Location:</label>
        <select id="pickup" name="pickup">
          <option value="location1">Location 1</option>
          <option value="location2">Location 2</option>
          <option value="location3">Location 3</option>
          <option value="location4">Location 4</option>
        </select>
        <br><br>
        <input type="submit" value="Book Lesson">
      </form>


    <!--
    lessonDate: Date,
    lessonDescription: string,
    lessonGoal: string,
    ophaalLocatie: string

            form(action='/register' method="post")
      input(type='text' name='voornaam' placeholder='Voornaam' required='')
      input(type='text' name='tussenvoegesel' placeholder='Tussenvoegsel')
      input(type='text' name='achternaam' placeholder='Achternaam' required='')
      div
        input(type='radio' name='gender' value='Man' required='')
        label(for='gender1') Man
        br
        input(type='radio' name='gender' value='Vrouw')
        label(for='gender2') Vrouw
        br
      input(type='email' name='email' placeholder='Email' required='')
      input(type='password' name='wachtwoord' placeholder='Wachtoord' required='')
      input.login-button(type='submit' value='Registeer')
    -->
</body>
</html>
<script>
    const picker = document.getElementById('date');

    var now = new Date();
    var nextMonday = new Date(now.getFullYear(), now.getMonth(), now.getDate() + (7 - now.getDay()) % 7 + 1, 8);
    var nextFriday = new Date(nextMonday.getFullYear(), nextMonday.getMonth(), nextMonday.getDate() + 4, 18);

    // Format the dates to be compatible with the date input
    var nextMondayFormatted = nextMonday.toISOString().slice(0, 16);
    var nextFridayFormatted = nextFriday.toISOString().slice(0, 16);

    // Set the min and max attributes of the date input
    picker.min = nextMondayFormatted;
    picker.max = nextFridayFormatted;
    
    picker.addEventListener('change', function(e) {
  var selectedDate = new Date(this.value);
  
  // Adjust the hour based on specific ranges
  if (selectedDate.getHours() < 8) {
    selectedDate.setHours(10); // Set the hour to 08:00 for inputted hours 01:00 to 07:00
  } else if (selectedDate.getHours() >= 19) {
    selectedDate.setHours(20    ); // Set the hour to 18:00 for inputted hours 19:00 to 00:00
  }
  
  var selectedDateFormatted = selectedDate.toISOString().slice(0, 14) + '00:00'; // Set the minute part to "00"
  this.value = selectedDateFormatted; // Update the input value with the modified date

  var day = (selectedDate.getUTCDay() + 1) % 7; // Adjust the day value
  if ([1, 2, 3, 4, 5].includes(day)) {
    e.target.setCustomValidity(''); // Clear the custom validity
  } else {
    e.target.setCustomValidity('Weekends are not allowed'); // Set custom validity for weekends
  }
});
</script>